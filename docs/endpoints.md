# MFL API Endpoint Reference

This document lists key MyFantasyLeague (MFL) API endpoints relevant for the `mfl-2025-theme`. The general base URL for these exports is:
`https://www{SERVER_NUM}.myfantasyleague.com/{YEAR}/export?TYPE={TYPE_NAME}&L={LEAGUE_ID}&JSON=1`

Replace `{SERVER_NUM}` (e.g., 03, 07, etc. - typically handled by MFL redirects if using `api.myfantasyleague.com`), `{YEAR}` (e.g., 2025), `{TYPE_NAME}`, and `{LEAGUE_ID}` as needed.
Always include `JSON=1` to get responses in JSON format.

| Module             | TYPE Parameter    | Example API URL (replace L with your League ID, YYYY with current year)                                     | Key Fields (Non-exhaustive, inspect JSON for full details)                                                                                                                               | Notes                                                                                                                                                                                              |
|--------------------|-------------------|-------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **League Standings** | `leagueStandings` | `https://api.myfantasyleague.com/YYYY/export?TYPE=leagueStandings&L=12345&JSON=1`                              | `leagueStandings.franchise[].id`, `leagueStandings.franchise[].name`, `leagueStandings.franchise[].h2hWins`, `leagueStandings.franchise[].h2hLosses`, `leagueStandings.franchise[].pf`, `leagueStandings.franchise[].pa`, `leagueStandings.franchise[].division` | Provides overall league standings, including wins, losses, points for, points against, etc. Useful for displaying division and overall league ranks.                                            |
| **Live Scoring**   | `liveScoring`     | `https://api.myfantasyleague.com/YYYY/export?TYPE=liveScoring&L=12345&W={WEEK}&JSON=1`                         | `liveScoring.matchup[].franchise[].id`, `liveScoring.matchup[].franchise[].score`, `liveScoring.matchup[].franchise[].playersCurrentlyPlaying`, `liveScoring.matchup[].franchise[].gameSecondsRemaining` , `liveScoring.matchup[].franchise[].player[].id`, `liveScoring.matchup[].franchise[].player[].score`  | Fetches real-time scores for a given week (`W` parameter). Shows team scores, individual player scores for active games, and game status. Crucial for the scoreboard. Consider `DETAILS=1` for more player detail. |
| **Weekly Results** | `weeklyResults`   | `https://api.myfantasyleague.com/YYYY/export?TYPE=weeklyResults&L=12345&W={WEEK}&JSON=1`                       | Similar to `liveScoring` but for completed weeks. `weeklyResults.matchup[].franchise[].id`, `weeklyResults.matchup[].franchise[].score`, `weeklyResults.matchup[].franchise[].result` (W/L/T)   | Provides final results for a specific week. Can be used to show past matchups and results. `W=YTD` can get all year-to-date results.                                                         |
| **Transactions**   | `transactions`    | `https://api.myfantasyleague.com/YYYY/export?TYPE=transactions&L=12345&JSON=1`                               | `transactions.transaction[].type`, `transactions.transaction[].timestamp`, `transactions.transaction[].franchise`, `transactions.transaction[].creator`, `transactions.transaction[].transaction` (details object varies by type) | Lists league transactions like trades, waiver pickups, free agent signings. Can be filtered by `TRANS_TYPE`, `FRANCHISE`, `DAYS`, `COUNT`.                                                            |
| **League Finances / Accounting** | `accounting`      | `https://api.myfantasyleague.com/YYYY/export?TYPE=accounting&L=12345&JSON=1`                               | `accounting.franchise[].id`, `accounting.franchise[].name`, `accounting.franchise[].balance`, `accounting.franchise[].charges`, `accounting.franchise[].payments`, `accounting.transaction[].type`, `accounting.transaction[].description`, `accounting.transaction[].amount` | Provides financial data, including franchise balances, and a list of financial transactions (dues, payouts, etc.).                                                                                   |
| **League Rules**   | `league` (general) / `rules` (specific rules summary) | `https://api.myfantasyleague.com/YYYY/export?TYPE=league&L=12345&JSON=1` or `TYPE=rules` | `league.franchises.franchise[]` (for team list/details), `league.starters`, `league.rostersize`, `rules.rule[].description`                                                                    | `TYPE=league` provides a lot of general league setup information, including roster settings, scoring rules, divisions, etc. `TYPE=rules` gives a summary of scoring and other game rules.           |
| **Player Scores**  | `playerScores`    | `https://api.myfantasyleague.com/YYYY/export?TYPE=playerScores&L=12345&W={WEEK}&JSON=1`                       | `playerScores.playerScore[].id`, `playerScores.playerScore[].score`, `playerScores.playerScore[].status`                                                                                        | Provides scores for all players for a given week, regardless of whether they were in a starting lineup. Useful for detailed box scores or player research.                                       |

**Important Considerations:**

*   **API Rate Limits:** Be mindful of MFL's API rate limits. Excessive requests can lead to temporary blocking. This is a key reason to consider a serverless caching strategy (see `data-strategy.md`).
*   **`APIKEY`:** For private leagues, an `APIKEY` might be necessary if the request isn't coming from an authenticated MFL session. This should be kept secret if used, ideally as a server-side environment variable.
*   **Data Structure:** The JSON structure can be complex and nested. Thoroughly inspect the responses for each endpoint to understand how to extract the required data.
*   **Year (`{YEAR}`):** Remember to use the correct season year in your API calls (e.g., `2025`).
*   **Week (`W`):** Many endpoints are week-specific. Ensure you provide the `W` parameter where appropriate. Use `W=YTD` for year-to-date data on some endpoints like `weeklyResults`.
*   **Server Number (`{SERVER_NUM}`):** MFL leagues are hosted on different servers (e.g., `www03`, `www42`, `www73`). Using `api.myfantasyleague.com` as the hostname usually handles redirection to the correct league server automatically. If you encounter issues, you might need to determine the specific server for a league.

This list is not exhaustive. MFL provides a wide range of data exports. Refer to the MFL API documentation or test area for a complete list and detailed parameters for each `TYPE`. 